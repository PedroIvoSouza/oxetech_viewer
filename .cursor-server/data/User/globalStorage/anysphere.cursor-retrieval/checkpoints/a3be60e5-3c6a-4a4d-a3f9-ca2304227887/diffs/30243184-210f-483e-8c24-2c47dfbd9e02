{"fsPath":"\\home\\oxetech_mcz\\docs\\AUTH_DEBUG.md","fileUuid":"30243184-210f-483e-8c24-2c47dfbd9e02","fileSizeBytes":1064,"numLines":41,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":42,"addedLines":["# Debug de Autenticação","","## Problema","Erro \"Unauthorized\" ao acessar `/api/bi/lab-detalhado`","","## Verificações Necessárias","","### 1. Cookie está sendo setado?","- Nome: `oxetech-auth-token`","- HttpOnly: true","- Path: /","- SameSite: lax","- MaxAge: 8 horas","","### 2. Cookie está sendo enviado?","- Verificar no DevTools → Application → Cookies","- Verificar se está presente em requisições (Network tab)","","### 3. Middleware está verificando corretamente?","- Rota `/api/bi/lab-detalhado` está protegida? ✅ SIM (startsWith('/api'))","- Cookie está sendo lido? Verificar linha 68 do middleware.ts","","### 4. Token JWT está válido?","- Verificar se não expirou","- Verificar se o secret está correto","","## Solução","","Se não estiver logado:","1. Acessar `/login`","2. Fazer login com credenciais:","   - Admin: admin@oxetech.al.gov.br / admin123","   - Gestor: gestor@oxetech.al.gov.br / gestor123","   - Visualização: visualizacao@oxetech.al.gov.br / view123","","Se já estiver logado:","1. Verificar cookies no DevTools","2. Se cookie não existe, fazer logout e login novamente","3. Verificar console para erros de JWT","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000001,1000004,1000001,1000005,1000006,1000007,1000008,1000009,1000010,1000001,1000011,1000012,1000013,1000001,1000014,1000015,1000016,1000001,1000017,1000018,1000019,1000001,1000020,1000001,1000021,1000022,1000023,1000024,1000025,1000026,1000001,1000027,1000028,1000029,1000030,1000001,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}