{"fsPath":"\\home\\oxetech_mcz\\app\\(dashboard)\\trilhas\\page.tsx","fileUuid":"eb4b1851-99db-49fd-a661-d8c425b7ec04","fileSizeBytes":5884,"numLines":182,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":183,"addedLines":["'use client'","","import { useTrilhasData } from '@/lib/queries/trilhas'","import { KPICard } from '@/components/dashboard/kpi-card'","import { BarChart } from '@/components/charts/bar-chart'","import { PieChart } from '@/components/charts/pie-chart'","import { Skeleton } from '@/components/ui/skeleton'","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'","import { BookOpen, Users, CheckCircle, TrendingUp } from 'lucide-react'","import { formatNumber, formatPercent } from '@/lib/formatters'","","export default function TrilhasPage() {","  const { data, isLoading, error } = useTrilhasData()","","  if (isLoading) {","    return (","      <div className=\"space-y-6\">","        <Skeleton className=\"h-96\" />","        <Skeleton className=\"h-96\" />","      </div>","    )","  }","","  if (error) {","    return (","      <div className=\"flex h-96 items-center justify-center\">","        <p className=\"text-destructive\">Erro ao carregar dados: {error.message}</p>","      </div>","    )","  }","","  if (!data) {","    return null","  }","","  const { trilhas, progressoPorTrilha, inscritos } = data","","  const totalTrilhas = trilhas.length","  const totalInscritos = inscritos.length","  const totalConcluidos = inscritos.filter((i) => i.concluido).length","  const progressoMedio =","    progressoPorTrilha.reduce((acc, item) => acc + item.progressoMedio, 0) /","    (progressoPorTrilha.length || 1)","","  return (","    <div className=\"space-y-6\">","      <div>","        <h1 className=\"text-3xl font-bold\">Trilhas de Conhecimento</h1>","        <p className=\"text-muted-foreground\">","          Dashboard das trilhas de conhecimento","        </p>","      </div>","","      {/* KPIs */}","      <div className=\"grid gap-4 md:grid-cols-4\">","        <KPICard","          title=\"Total de Trilhas\"","          value={formatNumber(totalTrilhas)}","          icon={BookOpen}","        />","        <KPICard","          title=\"Inscritos\"","          value={formatNumber(totalInscritos)}","          icon={Users}","        />","        <KPICard","          title=\"Concluídos\"","          value={formatNumber(totalConcluidos)}","          icon={CheckCircle}","        />","        <KPICard","          title=\"Progresso Médio\"","          value={formatPercent(progressoMedio)}","          icon={TrendingUp}","        />","      </div>","","      {/* Gráficos */}","      <div className=\"grid gap-6 md:grid-cols-2\">","        {progressoPorTrilha.length > 0 && (","          <BarChart","            title=\"Progresso Médio por Trilha\"","            description=\"Percentual médio de conclusão por trilha\"","            data={progressoPorTrilha}","            xKey=\"trilha\"","            yKeys={[","              {","                key: 'progressoMedio',","                name: 'Progresso (%)',","                color: '#8884d8',","              },","            ]}","          />","        )}","        {progressoPorTrilha.length > 0 && (","          <BarChart","            title=\"Inscritos e Concluídos por Trilha\"","            description=\"Distribuição de inscritos e concluídos\"","            data={progressoPorTrilha}","            xKey=\"trilha\"","            yKeys={[","              { key: 'totalInscritos', name: 'Inscritos', color: '#82ca9d' },","              { key: 'concluidos', name: 'Concluídos', color: '#ffc658' },","            ]}","          />","        )}","      </div>","","      {/* Lista de Trilhas */}","      <div className=\"grid gap-4 md:grid-cols-2\">","        {trilhas.slice(0, 10).map((trilha) => (","          <Card key={trilha.id}>","            <CardHeader>","              <CardTitle>{trilha.titulo}</CardTitle>","              <CardDescription>{trilha.descricao}</CardDescription>","            </CardHeader>","            <CardContent>","              <div className=\"space-y-2 text-sm\">","                <div>","                  <span className=\"font-medium\">Carga Horária: </span>","                  {trilha.carga_horaria}h","                </div>","                <div>","                  <span className=\"font-medium\">Módulos: </span>","                  {trilha.modulos_trilhas.length}","                </div>","              </div>","            </CardContent>","          </Card>","        ))}","      </div>","","      {/* Tabela de Inscritos */}","      <Card>","        <CardHeader>","          <CardTitle>Inscritos com Progresso</CardTitle>","          <CardDescription>","            Lista de alunos inscritos nas trilhas com percentual de conclusão","          </CardDescription>","        </CardHeader>","        <CardContent>","          <div className=\"overflow-x-auto\">","            <table className=\"w-full\">","              <thead>","                <tr className=\"border-b\">","                  <th className=\"text-left p-2\">Aluno</th>","                  <th className=\"text-left p-2\">Email</th>","                  <th className=\"text-left p-2\">Trilha</th>","                  <th className=\"text-right p-2\">Concluído</th>","                  <th className=\"text-right p-2\">Progresso</th>","                </tr>","              </thead>","              <tbody>","                {inscritos.slice(0, 50).map((inscrito) => (","                  <tr key={inscrito.id} className=\"border-b\">","                    <td className=\"p-2\">{inscrito.aluno}</td>","                    <td className=\"p-2 text-muted-foreground\">","                      {inscrito.email}","                    </td>","                    <td className=\"p-2\">{inscrito.trilha}</td>","                    <td className=\"p-2 text-right\">","                      {inscrito.concluido ? (","                        <span className=\"text-green-600\">Sim</span>","                      ) : (","                        <span className=\"text-muted-foreground\">Não</span>","                      )}","                    </td>","                    <td className=\"p-2 text-right font-medium\">","                      {formatPercent(inscrito.percentualConcluido)}","                    </td>","                  </tr>","                ))}","              </tbody>","            </table>","          </div>","        </CardContent>","      </Card>","    </div>","  )","}","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000001,1000010,1000011,1000001,1000012,1000013,1000014,1000015,1000015,1000016,1000017,1000018,1000001,1000019,1000013,1000020,1000021,1000016,1000017,1000018,1000001,1000022,1000023,1000018,1000001,1000024,1000001,1000025,1000026,1000027,1000028,1000029,1000030,1000001,1000031,1000032,1000033,1000034,1000035,1000036,1000037,1000016,1000001,1000038,1000039,1000040,1000041,1000042,1000043,1000044,1000040,1000045,1000046,1000047,1000044,1000040,1000048,1000049,1000050,1000044,1000040,1000051,1000052,1000053,1000044,1000016,1000001,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000062,1000063,1000064,1000065,1000066,1000067,1000068,1000069,1000070,1000056,1000057,1000071,1000072,1000060,1000061,1000062,1000073,1000074,1000068,1000069,1000070,1000016,1000001,1000075,1000076,1000077,1000078,1000079,1000080,1000081,1000082,1000083,1000084,1000085,1000086,1000087,1000088,1000085,1000089,1000090,1000088,1000091,1000092,1000093,1000094,1000016,1000001,1000095,1000096,1000097,1000098,1000099,1000100,1000101,1000102,1000103,1000104,1000105,1000106,1000107,1000108,1000109,1000110,1000111,1000112,1000113,1000114,1000115,1000116,1000117,1000118,1000119,1000120,1000121,1000122,1000123,1000124,1000125,1000126,1000127,1000128,1000121,1000129,1000130,1000121,1000131,1000132,1000133,1000134,1000135,1000136,1000137,1000138,1000139,1000140,1000001,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}