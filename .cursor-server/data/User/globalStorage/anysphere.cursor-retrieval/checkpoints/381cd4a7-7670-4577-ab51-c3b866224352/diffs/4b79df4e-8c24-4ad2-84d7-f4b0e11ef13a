{"fsPath":"\\home\\oxetech_mcz\\app\\(dashboard)\\alunos\\page.tsx","fileUuid":"4b79df4e-8c24-4ad2-84d7-f4b0e11ef13a","fileSizeBytes":6285,"numLines":199,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":200,"addedLines":["'use client'","","import { useState } from 'react'","import { useAlunosData } from '@/lib/queries/alunos'","import { KPICard } from '@/components/dashboard/kpi-card'","import { Skeleton } from '@/components/ui/skeleton'","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'","import { Button } from '@/components/ui/button'","import { Users, BookOpen, CheckCircle, FlaskConical, GraduationCap, Calendar } from 'lucide-react'","import { formatNumber, formatDate } from '@/lib/formatters'","import Link from 'next/link'","","export default function AlunosPage() {","  const [page, setPage] = useState(1)","  const { data, isLoading, error } = useAlunosData(page, 20)","","  if (isLoading) {","    return (","      <div className=\"space-y-6\">","        <Skeleton className=\"h-96\" />","      </div>","    )","  }","","  if (error) {","    return (","      <div className=\"flex h-96 items-center justify-center\">","        <p className=\"text-destructive\">Erro ao carregar dados: {error.message}</p>","      </div>","    )","  }","","  if (!data) {","    return null","  }","","  const { alunos, pagination } = data","","  // Calcular totais","  const totalTrilhasInscritas = alunos.reduce(","    (acc, aluno) => acc + aluno.trilhasInscritas,","    0","  )","  const totalTrilhasConcluidas = alunos.reduce(","    (acc, aluno) => acc + aluno.trilhasConcluidas,","    0","  )","  const totalLabInscricoes = alunos.reduce(","    (acc, aluno) => acc + aluno.labInscricoes,","    0","  )","  const totalMatriculasLab = alunos.reduce(","    (acc, aluno) => acc + aluno.matriculasLab,","    0","  )","  const totalMatriculasEdu = alunos.reduce(","    (acc, aluno) => acc + aluno.matriculasEdu,","    0","  )","  const totalFrequencias = alunos.reduce(","    (acc, aluno) => acc + aluno.totalFrequencias,","    0","  )","","  return (","    <div className=\"space-y-6\">","      <div>","        <h1 className=\"text-3xl font-bold\">Alunos</h1>","        <p className=\"text-muted-foreground\">","          Lista de alunos do ecossistema OxeTech","        </p>","      </div>","","      {/* KPIs */}","      <div className=\"grid gap-4 md:grid-cols-6\">","        <KPICard","          title=\"Total de Alunos\"","          value={formatNumber(pagination.total)}","          icon={Users}","        />","        <KPICard","          title=\"Trilhas Inscritas\"","          value={formatNumber(totalTrilhasInscritas)}","          icon={BookOpen}","        />","        <KPICard","          title=\"Trilhas Concluídas\"","          value={formatNumber(totalTrilhasConcluidas)}","          icon={CheckCircle}","        />","        <KPICard","          title=\"Lab Inscrições\"","          value={formatNumber(totalLabInscricoes)}","          icon={FlaskConical}","        />","        <KPICard","          title=\"Matrículas Edu\"","          value={formatNumber(totalMatriculasEdu)}","          icon={GraduationCap}","        />","        <KPICard","          title=\"Frequências\"","          value={formatNumber(totalFrequencias)}","          icon={Calendar}","        />","      </div>","","      {/* Tabela de Alunos */}","      <Card>","        <CardHeader>","          <CardTitle>Lista de Alunos</CardTitle>","        </CardHeader>","        <CardContent>","          <div className=\"overflow-x-auto\">","            <table className=\"w-full\">","              <thead>","                <tr className=\"border-b\">","                  <th className=\"text-left p-2\">Nome</th>","                  <th className=\"text-left p-2\">Email</th>","                  <th className=\"text-left p-2\">Status</th>","                  <th className=\"text-left p-2\">Cadastro</th>","                  <th className=\"text-right p-2\">Trilhas</th>","                  <th className=\"text-right p-2\">Lab</th>","                  <th className=\"text-right p-2\">Edu</th>","                  <th className=\"text-right p-2\">Ações</th>","                </tr>","              </thead>","              <tbody>","                {alunos.map((aluno) => (","                  <tr key={aluno.id} className=\"border-b\">","                    <td className=\"p-2 font-medium\">{aluno.name}</td>","                    <td className=\"p-2 text-muted-foreground\">","                      {aluno.email}","                    </td>","                    <td className=\"p-2\">","                      <span","                        className={`rounded-full px-2 py-1 text-xs ${","                          aluno.status === 'VALIDADO'","                            ? 'bg-green-100 text-green-800'","                            : 'bg-yellow-100 text-yellow-800'","                        }`}","                      >","                        {aluno.status}","                      </span>","                    </td>","                    <td className=\"p-2 text-sm text-muted-foreground\">","                      {formatDate(aluno.created_at)}","                    </td>","                    <td className=\"p-2 text-right\">","                      {aluno.trilhasInscritas} ({aluno.trilhasConcluidas})","                    </td>","                    <td className=\"p-2 text-right\">{aluno.labInscricoes}</td>","                    <td className=\"p-2 text-right\">{aluno.matriculasEdu}</td>","                    <td className=\"p-2 text-right\">","                      <Link href={`/alunos/${aluno.id}`}>","                        <Button variant=\"ghost\" size=\"sm\">","                          Ver detalhes","                        </Button>","                      </Link>","                    </td>","                  </tr>","                ))}","              </tbody>","            </table>","          </div>","","          {/* Paginação */}","          <div className=\"mt-4 flex items-center justify-between\">","            <p className=\"text-sm text-muted-foreground\">","              Página {pagination.page} de {pagination.totalPages}","            </p>","            <div className=\"flex gap-2\">","              <Button","                variant=\"outline\"","                size=\"sm\"","                onClick={() => setPage((p) => Math.max(1, p - 1))}","                disabled={page === 1}","              >","                Anterior","              </Button>","              <Button","                variant=\"outline\"","                size=\"sm\"","                onClick={() =>","                  setPage((p) => Math.min(pagination.totalPages, p + 1))","                }","                disabled={page === pagination.totalPages}","              >","                Próxima","              </Button>","            </div>","          </div>","        </CardContent>","      </Card>","    </div>","  )","}","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000010,1000001,1000011,1000012,1000013,1000001,1000014,1000015,1000016,1000017,1000018,1000019,1000020,1000001,1000021,1000015,1000022,1000023,1000018,1000019,1000020,1000001,1000024,1000025,1000020,1000001,1000026,1000001,1000027,1000028,1000029,1000030,1000031,1000032,1000033,1000030,1000031,1000034,1000035,1000030,1000031,1000036,1000037,1000030,1000031,1000038,1000039,1000030,1000031,1000040,1000041,1000030,1000031,1000001,1000042,1000043,1000044,1000045,1000046,1000047,1000048,1000018,1000001,1000049,1000050,1000051,1000052,1000053,1000054,1000055,1000051,1000056,1000057,1000058,1000055,1000051,1000059,1000060,1000061,1000055,1000051,1000062,1000063,1000064,1000055,1000051,1000065,1000066,1000067,1000055,1000051,1000068,1000069,1000070,1000055,1000018,1000001,1000071,1000072,1000073,1000074,1000075,1000076,1000077,1000078,1000079,1000080,1000081,1000082,1000083,1000084,1000085,1000086,1000087,1000088,1000089,1000090,1000091,1000092,1000093,1000094,1000095,1000096,1000097,1000098,1000099,1000100,1000101,1000102,1000103,1000104,1000105,1000106,1000107,1000097,1000108,1000109,1000097,1000110,1000111,1000097,1000112,1000113,1000110,1000114,1000115,1000116,1000117,1000118,1000097,1000119,1000120,1000121,1000122,1000123,1000001,1000124,1000125,1000126,1000127,1000128,1000129,1000130,1000131,1000132,1000133,1000134,1000135,1000136,1000137,1000130,1000131,1000132,1000138,1000139,1000140,1000141,1000135,1000142,1000137,1000143,1000123,1000144,1000145,1000146,1000031,1000147,1000001,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}